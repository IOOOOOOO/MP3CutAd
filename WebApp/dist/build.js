!function(e){function t(i){if(o[i])return o[i].exports;var n=o[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var o={};return t.m=e,t.c=o,t.p="/dist/",t(0)}([function(e,t,o){"use strict";var i=o(10),n=o(31);window.Vue=i,new i({el:"body",components:{app:n}})},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var o=this[t];o[2]?e.push("@media "+o[2]+"{"+o[1]+"}"):e.push(o[1])}return e.join("")},e.i=function(t,o){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(i[r]=!0)}for(n=0;n<t.length;n++){var s=t[n];"number"==typeof s[0]&&i[s[0]]||(o&&!s[2]?s[2]=o:o&&(s[2]="("+s[2]+") and ("+o+")"),e.push(s))}},e}},function(e,t,o){function i(e,t){for(var o=0;o<e.length;o++){var i=e[o],n=f[i.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](i.parts[r]);for(;r<i.parts.length;r++)n.parts.push(c(i.parts[r],t))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(c(i.parts[r],t));f[i.id]={id:i.id,refs:1,parts:s}}}}function n(e){for(var t=[],o={},i=0;i<e.length;i++){var n=e[i],r=n[0],s=n[1],a=n[2],l=n[3],c={css:s,media:a,sourceMap:l};o[r]?o[r].parts.push(c):t.push(o[r]={id:r,parts:[c]})}return t}function r(e,t){var o=b(),i=x[x.length-1];if("top"===e.insertAt)i?i.nextSibling?o.insertBefore(t,i.nextSibling):o.appendChild(t):o.insertBefore(t,o.firstChild),x.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");o.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=x.indexOf(e);t>=0&&x.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",r(e,t),t}function c(e,t){var o,i,n;if(t.singleton){var r=m++;o=h||(h=a(t)),i=d.bind(null,o,r,!1),n=d.bind(null,o,r,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=l(t),i=p.bind(null,o),n=function(){s(o),o.href&&URL.revokeObjectURL(o.href)}):(o=a(t),i=u.bind(null,o),n=function(){s(o)});return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else n()}}function d(e,t,o,i){var n=o?"":i.css;if(e.styleSheet)e.styleSheet.cssText=k(t,n);else{var r=document.createTextNode(n),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function u(e,t){var o=t.css,i=t.media;t.sourceMap;if(i&&e.setAttribute("media",i),e.styleSheet)e.styleSheet.cssText=o;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(o))}}function p(e,t){var o=t.css,i=(t.media,t.sourceMap);i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var n=new Blob([o],{type:"text/css"}),r=e.href;e.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var f={},v=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},g=v(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),b=v(function(){return document.head||document.getElementsByTagName("head")[0]}),h=null,m=0,x=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=g()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var o=n(e);return i(o,t),function(e){for(var r=[],s=0;s<o.length;s++){var a=o[s],l=f[a.id];l.refs--,r.push(l)}if(e){var c=n(e);i(c,t)}for(var s=0;s<r.length;s++){var l=r[s];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete f[l.id]}}}};var k=function(){var e=[];return function(t,o){return e[t]=o,e.filter(Boolean).join("\n")}}()},,,,,,function(e,t){"use strict";t.delimeter=navigator.platform.match(/win/i)?"\\":"/",t.resolveFileName=function(e){var o=e.split(/[\/\\]/g),i=o.pop(),n=o.join(t.delimeter),r=i.indexOf("."),s=i,a="";return-1!==r&&(s=i.substring(0,r),a=i.substring(r)),{fullname:e,filename:i,directory:n,basename:s,extname:a}},t.extend=function(e,t){for(var o=Object.keys(t),i=o.length;i--;)e[o[i]]=t[o[i]];return e},t.floor=function(e){return~~e},t.rand=function(e,o){return void 0===o&&(o=e,e=0),t.floor(Math.random()*(o-e))+e},t.padding=function(e,t){var o=arguments.length<=2||void 0===arguments[2]?" ":arguments[2];for(e=""+e;e.length<t;)e=o+e;return e},t.qsa=function(e){var t=arguments.length<=1||void 0===arguments[1]?document:arguments[1];return[].slice.call(t.querySelectorAll(e),0)},t.hsv2rgb=function(e,o,i){var n,r,s;if(0==o)n=r=s=i;else{e/=60;var a=t.floor(e),l=e-a,c=i*(1-o),d=i*(1-o*l),u=i*(1-o*(1-l));switch(a){case 0:n=i,r=u,s=c;break;case 1:n=d,r=i,s=c;break;case 2:n=c,r=i,s=u;break;case 3:n=c,r=d,s=i;break;case 4:n=u,r=c,s=i;break;case 5:n=i,r=c,s=d}}return n=t.floor(255*n),r=t.floor(255*r),s=t.floor(255*s),[n,r,s]},t.rgb2hex=function(e,o,i){return"#"+t.padding(e.toString(16),2,"0")+t.padding(o.toString(16),2,"0")+t.padding(i.toString(16),2,"0")}},function(e,t,o){o(24),e.exports=o(14),("function"==typeof e.exports?e.exports.options:e.exports).template=o(29)},function(e,t){e.exports=Vue},function(e,t,o){"use strict";var i=o(8);e.exports={data:function(){return{selectedFiles:[],groupCount:0,selectedFile:null,selectedAd:null,loading:!1,loadingProgress:0}},methods:{addFile:function(e){if(!this.selectedFiles.some(function(t){return t.fullname===e})){var t={length:NaN,ads:[]};i.extend(t,i.resolveFileName(e)),t.length=i.rand(123456),this.selectedFiles.push(t)}},openFile:function(){var e=this;bound.openFile("添加文件","音频文件(*.mp3)|*.mp3",function(t,o){o=JSON.parse(o),o.forEach(e.addFile)})},openDirectory:function(){var e=this;bound.openDirectory("*.mp3",function(t,o){o=JSON.parse(o),o.forEach(e.addFile)})},removeFile:function(e){return this.selectedFiles.$remove(e),!1},selectAd:function(e,t){this.selectedFile=e,this.selectedAd=t},detectAd:function(){var e=this;this.loading=!0;var t=setInterval(function(){var t=.1;e.loadingProgress>.6&&(t=.05),e.loadingProgress+=Math.random()*t,e.loadingProgress>.95&&(e.loadingProgress=.95)},500);this.loadingProgress=0,bound.detectAD(JSON.stringify(this.selectedFiles.map(function(e){return e.fullname})),function(o,i){e.loading=!1,clearInterval(t),i=JSON.parse(i);var n=[];i.forEach(function(t,o){var i=e.selectedFiles[o];i.length=t.length;var r=t.ads;r.forEach(function(e,t){var o=e.gid;-1===n.indexOf(o)&&n.push(o),e.ignored=!1}),i.ads=r}),e.groupCount=n.length})},cut:function(){var e=this;bound.selectDirectory(function(t,o){o=JSON.parse(o),o&&(e.loading=!0,bound.cut(JSON.stringify(e.selectedFiles),o,function(t,i){alert(JSON.stringify(["cut",t,i,o],null,"  ")),e.loading=!1}))})},showDevTools:function(){bound.showDevTools()}},components:{FileList:o(33),ControlPanel:o(32),ProgressBar:o(9)}}},function(e,t,o){"use strict";e.exports={props:["ad","file"],computed:{disable:function(){return!(this.ad&&this.file)},tagButtonText:function(){return this.ad?this.ad.ignored?"这是广告":"不是广告":""}},methods:{play:function(){alert("播放："+JSON.stringify({fullname:this.file.fullname,start:this.ad.start,end:this.ad.end},null,"  "))},tagAd:function(){this.ad.ignored=!this.ad.ignored}},components:{ProgressBar:o(9)}}},function(e,t,o){"use strict";var i=o(34);e.exports={props:["files","group-count","selected-ad"],data:function(){return{expand:!0}},computed:{expandButtonText:function(){return this.expand?"-":"+"}},methods:{adMouseover:function(e){this.$broadcast("ad-active",e)},adMouseout:function(e){this.$broadcast("ad-deactive",e)}},components:{TrackViewer:i}}},function(e,t){"use strict";e.exports={props:["progress"],computed:{percent:function o(){var o=100*+this.progress;return o>100&&(o=100),0>o&&(o=0),o+"%"}}}},function(e,t,o){"use strict";var i=o(10),n=o(8);i.filter("musicTime",function(e){var t=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];if(isNaN(e))return"--:--";var o=e%1e3;e=n.floor(e/1e3);var i=e%60;e=n.floor(e/60);var r=e%60;e=n.floor(e/60);var s=e,a="";return s>0&&(a+=s+":"),(!t||r>0)&&(a+=(a?n.padding(r,2,"0"):r)+":"),a+=a?n.padding(i,2,"0"):i,t&&(a+=":"+n.padding(o,3,"0")),a}),i.filter("segmentStyle",function(e,t,o){var i={top:0,bottom:0};if(i.left=e.start/t.length*100+"%",i.right=100*(1-e.end/t.length)+"%",o>0){var r=e.gid/o*350+10,s=n.hsv2rgb(r,.8,.9),a=s[0],l=s[1],c=s[2],d=n.rgb2hex(a,l,c);i.backgroundColor=d}return i}),e.exports={props:["file","group-count","selected-ad"],data:function(){return{activeGroup:null}},methods:{removeFile:function(e){this.$dispatch("remove",this.file)},mouseover:function(e){this.$dispatch("ad-mouseover",e)},mouseout:function(e){this.$dispatch("ad-mouseout",e)},select:function(e){this.$dispatch("select-ad",this.file,e),this.selectedAd=e},tagAd:function(e){e.ignored=!e.ignored},playSegment:function(e){console.log("playSegment",e)}},events:{"ad-active":function(e){this.activeGroup=e.gid},"ad-deactive":function(e){this.activeGroup=null}}}},function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".pure-button{color:#fff;border-radius:4px;text-shadow:0 1px 1px rgba(0,0,0,.2)}.pure-button-success{background:#1cb841}.pure-button-error{background:#ca3c3c}.pure-button-warning{background:#df7514}.pure-button-secondary{background:#42b8dd}.h-box,.v-box{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex}.v-box{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column}*{box-sizing:border-box}@-webkit-keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes spin{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}.spinner{-webkit-animation:spin 2s infinite ease-in-out;animation:spin 2s infinite ease-in-out}body{font:100% Helvetica,\\\\5FAE\\8F6F\\96C5\\9ED1,sans-serif;color:#333;background-color:#fff}#wrap{position:absolute;width:100%;height:100%;min-height:320px}#body{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}#body,#footer{width:100%}#sidebar{width:120px;padding:10px 4px 0;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center}#sidebar button{width:100%;margin-bottom:10px}#main{min-width:360px;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1;overflow-x:hidden;overflow-y:auto}#loading{position:absolute;width:100%;height:100%;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;background:hsla(0,0%,100%,.8);z-index:999}#loading i{font-size:120px}#loading div{font-size:24px}#loading .progress{width:80%}",""])},function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".control-panel[_v-1140326b]{position:relative;height:40px}.mask[_v-1140326b]{position:absolute;width:100%;height:100%;top:0;left:0;background:hsla(0,0%,100%,.8)}.player[_v-1140326b]{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.player .control[_v-1140326b]{padding-left:4px}.player .control i[_v-1140326b]{margin:0 4px;cursor:pointer}.player .progress[_v-1140326b]{-webkit-box-flex:1;-webkit-flex:1;-ms-flex:1;flex:1}.ad-control[_v-1140326b]{padding-right:4px}",""])},function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".file-list ul[_v-487615b4]{list-style:none;margin:0;padding:0}.file-list ul>li.item[_v-487615b4]{position:relative;margin-bottom:4px;background-color:#eee}.file-list ul>li.item>header[_v-487615b4]{position:absolute;left:0;top:0}",""])},function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".progress-bar[_v-c2251d28]{width:100%;height:16px}.progress-bar .slot[_v-c2251d28]{position:relative;width:100%;height:100%;background-color:#fff;box-shadow:0 1px 2px #333 inset,0 -1px 2px #333 inset}.progress-bar .slot .current[_v-c2251d28]{position:absolute;left:0;top:0;height:100%;background-color:rgba(0,88,255,.5);-webkit-transition:width .2s;transition:width .2s}",""])},function(e,t,o){t=e.exports=o(1)(),t.push([e.id,".track-viewer[_v-724d354d]{height:36px}.track-viewer .time[_v-724d354d]{position:absolute;right:0;bottom:0;padding:2px 4px;background-color:hsla(0,0%,100%,.6);font-size:12px;z-index:10}.track-viewer>.remove[_v-724d354d]{position:absolute;right:2px;top:2px;opacity:.6;cursor:pointer;z-index:30}.track-viewer>.remove[_v-724d354d]:hover{opacity:1}.track-viewer .track[_v-724d354d]{position:relative;width:100%;height:100%}.track-viewer .track>.segment[_v-724d354d]{position:absolute;height:100%;z-index:20;opacity:.6;cursor:pointer}.track-viewer .track>.segment.active[_v-724d354d],.track-viewer .track>.segment.selected[_v-724d354d]{opacity:1}.track-viewer .track>.segment.ignored[_v-724d354d]:not(:hover){opacity:.2}.track-viewer .track>.segment .control[_v-724d354d]{visibility:hidden;position:absolute;top:50%;left:50%;width:36px;height:18px;margin-top:-9px;margin-left:-18px;text-align:center;z-index:100}.track-viewer .track>.segment .control>i[_v-724d354d]{font-size:18px;cursor:pointer;color:#666}.track-viewer .track>.segment .control>i[_v-724d354d]:hover{color:#000}.track-viewer .track>.segment .control.active[_v-724d354d],.track-viewer .track>.segment:hover .control[_v-724d354d]{visibility:visible}",""])},function(e,t,o){var i=o(16);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,o){var i=o(17);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,o){var i=o(18);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,o){var i=o(19);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,o){var i=o(20);"string"==typeof i&&(i=[[e.id,i,""]]);o(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t){e.exports='<div id=wrap class=v-box><div id=body class=h-box><div id=sidebar class=v-box><button class="pure-button pure-button-primary" @click=openFile><i class="fa fa-file-o"></i> <span>添加文件</span></button> <button class="pure-button pure-button-primary" @click=openDirectory><i class="fa fa-folder-open-o"></i> <span>添加目录</span></button> <button class="pure-button pure-button-secondary" :disabled="selectedFiles.length === 0" @click=detectAd><i class="fa fa-search"></i> <span>算！</span></button> <button class="pure-button pure-button-secondary" :disabled="selectedFiles.length === 0" @click=cut><i class="fa fa-scissors"></i> <span>干！</span></button> <button class="pure-button pure-button-warning" @click=showDevTools><i class="fa fa-cog"></i> <span>DevTools</span></button></div><div id=main class=v-box><file-list :files=selectedFiles :selected-ad.sync=selectedAd @remove=removeFile @select-ad=selectAd :group-count=groupCount></file-list></div></div><div id=footer><control-panel :ad=selectedAd :file=selectedFile></control-panel></div></div><div id=loading v-show=loading class=v-box><i class="fa fa-spinner spinner"></i><div>玩命计算中</div><div class=progress><progress-bar :progress=loadingProgress></progress-bar></div></div>'},function(e,t){e.exports='<div class="control-panel h-box" _v-1140326b=""><div class="player h-box" _v-1140326b=""><div class="control h-box" _v-1140326b=""><i class="play fa fa-play" @click=play _v-1140326b=""></i></div><div class=progress _v-1140326b=""></div></div><div class=ad-control _v-1140326b=""><button class="pure-button pure-button-warning" v-show=ad @click=tagAd _v-1140326b="">{{tagButtonText}}</button></div><div class=mask v-show=disable _v-1140326b=""></div></div>'},function(e,t){e.exports='<div class=file-list _v-487615b4=""><div class=control _v-487615b4=""></div><ul class=list v-show=expand _v-487615b4=""><li v-for="file in files" class="item v-box" _v-487615b4=""><header class=h-box _v-487615b4=""><span _v-487615b4="">{{file.filename}}</span></header><track-viewer :file=file :group-count=groupCount :selected-ad=selectedAd @ad-mouseover=adMouseover @ad-mouseout=adMouseout _v-487615b4=""></track-viewer></li></ul></div>'},function(e,t){e.exports='<div class=progress-bar _v-c2251d28=""><div class=slot _v-c2251d28=""><div class=current :style="{ width: percent }" _v-c2251d28=""></div></div></div>'},function(e,t){e.exports='<div class=track-viewer _v-724d354d=""><div class=track v-el:track="" _v-724d354d=""><div class=segment v-if="file.ads.length > 0" v-for="ad in file.ads" :class="{ active: ad.gid === activeGroup, ignored: ad.ignored, selected: ad === selectedAd }" :style="ad | segmentStyle file groupCount" @mouseover=mouseover(ad) @mouseout=mouseout(ad) @click=select(ad) _v-724d354d=""></div></div><span class=time _v-724d354d="">{{file.length | musicTime true}}</span> <i class="remove fa fa-times" @click=removeFile _v-724d354d=""></i></div>'},function(e,t,o){o(21),e.exports=o(11),("function"==typeof e.exports?e.exports.options:e.exports).template=o(26)},function(e,t,o){o(22),e.exports=o(12),("function"==typeof e.exports?e.exports.options:e.exports).template=o(27)},function(e,t,o){o(23),e.exports=o(13),("function"==typeof e.exports?e.exports.options:e.exports).template=o(28)},function(e,t,o){o(25),e.exports=o(15),("function"==typeof e.exports?e.exports.options:e.exports).template=o(30)}]);